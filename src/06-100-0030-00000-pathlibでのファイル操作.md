### pathlib でのファイル操作

```py
from pathlib import Path
```

| 項目                 | 関数            | 値                                                             |
| -------------------- | --------------- | -------------------------------------------------------------- |
| カレントディレクトリ | `Path().cwd()`  | `WindowsPath('C:/Users/y/Documents/GitHub/Python-cheatsheet')` |
| ホームディレクトリ   | `Path().home()` | `WindowsPath('C:/Users/y')`                                    |

```py
from pathlib import Path

p = Path() # カレントディレクトリ
```

| 項目                                             | 関数                                                        | 値                                                             |
| ------------------------------------------------ | ----------------------------------------------------------- | -------------------------------------------------------------- |
| 相対パス                                         | `p`                                                         | `WindowsPath('.')`                                             |
| 絶対パス                                         | `p.resolve()` <br> `p.absolute()`                           | `WindowsPath('C:/Users/y/Documents/GitHub/Python-cheatsheet')` |
| パスが絶対パスかどうか                           | `p.is_absolute()`                                           | `False`                                                        |
|                                                  |                                                             |                                                                |
| パス文字列の連結（結合）                         | `Path('test-pathlib').joinpath('sub')`                      | `WindowsPath('test-pathlib/sub')`                              |
|                                                  | `Path('c:').joinpath('/Program Files')`                     | `WindowsPath('c:/Program Files')`                              |
|                                                  | `Path('c:/').joinpath('Program Files')`                     | `WindowsPath('c:/Program Files')`                              |
|                                                  | `Path('c:').joinpath('Program Files')`                      | `WindowsPath('c:Program Files')`                               |
|                                                  | `Path('c:\\').joinpath('Program Files').joinpath('Python')` | `WindowsPath('c:/Program Files/Python')`                       |
| パス文字列のうちファイル名（basename）のみを置換 | `Path('c:/pathlib').with_name('replaced')`                  | `WindowsPath('c:/replaced')`                                   |
|                                                  |                                                             |                                                                |
| 2 つのパス間の相対パス                           | `Path('/var/www/html').relative_to('/var')`                 | `WindowsPath('www/html')`                                      |
|                                                  | `Path('/var/www/html').relative_to('/etc')`                 | `ValueError: '\\var\\www\\html' does not start with '\\etc'`   |

```py
from pathlib import Path

filepath = ('./test-pathlib/test.txt')
p = Path(filepath) # ファイルのPathオブジェクト
```

| 項目                                                                                       | 関数                                        | 値                                                                                                                                                                                             |
| ------------------------------------------------------------------------------------------ | ------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 相対パス                                                                                   | `p`                                         | `WindowsPath('test-pathlib/test.txt')`                                                                                                                                                         |
| 絶対パス                                                                                   | `p.resolve()` <br>or<br> `p.absolute()`     | `WindowsPath('C:/Users/y/Documents/GitHub/Python-cheatsheet/test-pathlib/test.txt')`                                                                                                           |
| パスが絶対パスかどうか                                                                     | `p.is_absolute()`                           | `False`                                                                                                                                                                                        |
| パス文字列の連結（結合）                                                                   | `Path('test-pathlib').joinpath('test.txt')` | `WindowsPath('test-pathlib/test.txt')`                                                                                                                                                         |
| パス文字列のうちファイル名（basename）のみを置換                                           | `p.with_name('replaced.txt')`               | `WindowsPath('test-pathlib/replaced.txt')`                                                                                                                                                     |
| 2 つのパス間の相対パス                                                                     | `Path('/etc/passwd').relative_to('/etc')`   | `WindowsPath('passwd')`                                                                                                                                                                        |
|                                                                                            |                                             |                                                                                                                                                                                                |
| スラッシュ区切りのパス                                                                     | `Path('c:\\windows').resolve().as_posix()`  | `'C:/Windows'`                                                                                                                                                                                 |
| file URI                                                                                   | `p.resolve().as_uri()`                      | `'file:///C:/Users/y/Documents/GitHub/Python-cheatsheet/test-pathlib/test.txt'`                                                                                                                |
|                                                                                            |                                             |                                                                                                                                                                                                |
| ドライブ文字                                                                               | `p.resolve().drive`                         | `'C:'`                                                                                                                                                                                         |
| ルート                                                                                     | `p.resolve().root`                          | `\\`                                                                                                                                                                                           |
| アンカー（ドライブ文字＋ルート）                                                           | `p.resolve().anchor`                        | `C:\\`                                                                                                                                                                                         |
| 上位パスを辿る                                                                             | `p.resolve().parents`                       | `<WindowsPath.parents>`                                                                                                                                                                        |
|                                                                                            | `[i for i in p.resolve().parents]`          | `[WindowsPath('C:/Users/y/Documents/GitHub/Python-cheatsheet/test-pathlib'), WindowsPath('C:/Users/y/Documents/GitHub/Python-cheatsheet'),` ... `WindowsPath('C:/Users'), WindowsPath('C:/')]` |
| 上位パス                                                                                   | `p.resolve().parent`                        | `WindowsPath('C:/Users/y/Documents/GitHub/Python-cheatsheet/test-pathlib')`                                                                                                                    |
|                                                                                            | `Path('/').parent`                          | `WindowsPath('/')` 親ディレクトリが存在しない場合                                                                                                                                              |
|                                                                                            | `Path('.').parent`                          | `WindowsPath('.')` 空のパス                                                                                                                                                                    |
|                                                                                            | `Path('.').resolve().parent`                | `WindowsPath('C:/Users/y/Documents/GitHub')`                                                                                                                                                   |
|                                                                                            |                                             |                                                                                                                                                                                                |
| ファイル名（basename）                                                                     | `p.resolve().name`                          | `'test.txt'`                                                                                                                                                                                   |
| 拡張子                                                                                     | `p.resolve().suffix`                        | `'.txt'`                                                                                                                                                                                       |
|                                                                                            | `Path('test.tar.gz').resolve().suffix`      | `'.gz'`                                                                                                                                                                                        |
| 拡張子のリスト                                                                             | `p.resolve().suffixes`                      | `['.txt']`                                                                                                                                                                                     |
|                                                                                            | `Path('test.tar.gz').resolve().suffixes`    | `['.tar', '.gz']`                                                                                                                                                                              |
| ファイル名から拡張子を除いたもの                                                           | `p.resolve().stem`                          | `'test'`                                                                                                                                                                                       |
|                                                                                            |                                             |                                                                                                                                                                                                |
| glob 形式のパターンにマッチするか                                                          | `p.match('*.txt')`                          | `True`                                                                                                                                                                                         |
| 　（pattern が相対表記であればパスは相対／絶対パスを取り、右から一致を調べる）             | `Path('/a/b/c.py').match('b/*.py')`         | `True`                                                                                                                                                                                         |
|                                                                                            | `Path('/a/b/c.py').match('a/*.py')`         | `False`                                                                                                                                                                                        |
| 　（pattern が絶対表記であればパスは絶対パスでなければならず、パス全体が一致するか調べる） | `Path('/a.py').match('/*.py')`              | `True`                                                                                                                                                                                         |
|                                                                                            | `Path('a/b.py').match('/*.py')`             | `False`                                                                                                                                                                                        |
| 　（大文字／小文字の区別）                                                                 | `Path('b.py').match('*.PY')`                | `True` (Windows の場合)                                                                                                                                                                        |
|                                                                                            | `p`                                         | `p`                                                                                                                                                                                            |
