### パス文字列の操作

```py
import os

# パス文字列を組み立てる
print(os.path.sep)

joined = os.path.join('.', 'test' + '-' + 'join', 'test.txt')
print(joined)

# ファイル名を取得する
bname = os.path.basename('./test-join/test.txt')
print(bname)

# ディレクトリ名を取得する
dname = os.path.dirname('./test-join/test.txt')
print(dname)

# ファイル名とディレクトリ名のペアを取得する
dname, bname = os.path.split('./test-join/test.txt')
print(dname, bname)

# 拡張子を取得する
root, ext = os.path.splitext('./test-join/test.txt')
print(root, ext)
spltext = os.path.splitext('./test-join/test.txt')
print(spltext[0], spltext[1])

# 絶対パスを取得する
absp = os.path.abspath('./test-join/test.txt')
print(absp)
if os.path.isabs(absp): # パス文字列が絶対パスか検査する
    print('ABSPATH')

# パス文字列がシンボリックリンクか検査する
absp = os.path.abspath('./test-join/test.txt')
os.path.islink(path)

# パス文字列がマウントポイントか検査する
absp = os.path.abspath('./test-join/test.txt')
os.path.ismount(path)

# 2つのパス間の相対パスを取得する
relp = os.path.relpath(absp, '.')
print(relp)

# 共通パス(階層単位／文字単位)を取得する
paths = [
    os.path.abspath('./test-join/test1.txt'),
    os.path.abspath('./test-join/test2.txt'),
]
cmnpath = os.path.commonpath(paths)
print(cmnpath)
cmnprefix = os.path.commonprefix(paths)
print(cmnprefix)


# ドライブレターを取得する
drive, tail = os.path.splitdrive(absp)
print(drive[0])
print(os.path.samefile(os.path.join(drive, tail), absp))
```

> \# パス文字列を組み立てる
>
> /
>
> './test-join/test.txt'
>
> \# ファイル名を取得する
>
> test.txt
>
> \# ディレクトリ名を取得する
>
> ./test-join
>
> \# ファイル名とディレクトリ名のペアを取得する
>
> ./test-join test.txt
>
> \# 拡張子を取得する
>
> ./test-join/test .txt
>
> \# 絶対パスを取得する
>
> '/mnt/c/Users/y/Documents/GitHub/Python-cheatsheet/test-join/test.txt'
>
> ABSPATH
>
> \# パス文字列がシンボリックリンクか検査する
>
> False
>
> \# パス文字列がマウントポイントか検査する
>
> False
>
> \# 2 つのパス間の相対パスを取得する
>
> test-join/test.txt'
>
> \# 共通パス(階層単位／文字単位)を取得する
>
> C:\Users\y\Documents\GitHub\Python-cheatsheet\test-join
>
> C:\Users\y\Documents\GitHub\Python-cheatsheet\test-join\test
>
> \# ドライブレターを取得する
>
> C
>
> True

#### 複数のパスが同一のファイルを示しているか検査

```py
paths = [
    os.path.abspath('./test-join/test1.txt'),
    os.path.abspath('./test-join/test/../test1.txt'),
]

print(os.path.samefile(paths[0], paths[1])) # ファイルパスが同じファイルを参照しているか

with open(paths[0], 'r') as f1, open(paths[1], 'r') as f2:
    print(os.path.sameopenfile(f1.fileno(), f2.fileno())) # ファイル記述子が同じファイルを参照しているか

stat1 = os.stat(paths[0])
stat2 = os.stat(paths[1])
print(os.path.samestat(stat1, stat2)) # os.fstat(), os.lstat()，os.stat() の返り値 (stat1, stat2) が同じファイルを参照しているか
```

> True
>
> True
>
> True

#### パス文字列を正規化する(不要な区切り文字、 `..` の除去　／　 Windows 環境での大文字小文字の置換、スラッシュとバックスラッシュの置換)

```py
import os

dirpath = 'path/to/to/to/../../folder/'

# 不要な区切り文字、 `..` の除去
nrmpath = os.path.normpath(dirpath)
print(nrmpath)

# Windows環境での大文字小文字の置換、スラッシュとバックスラッシュの置換
nrmcase = os.path.normcase(path)
print(nrmcase)
```

> path\to\folder
>
> c:\users\y\path\to\file.txt

#### ホームディレクトリのパスを取得

```py
import os.path

filepath = os.path.join('~', 'path', 'to', 'file.txt')
path  = os.path.expanduser(filepath)
print(path)
```

> C:\Users\y\path\to\file.txt

#### 環境変数を取得

```py
import os.path

# for Linux
filepath = os.path.join('$HOME', 'path', 'to', 'file.txt')
path  = os.path.expandvars(filepath)
print(path)

# for Windows
filepath = os.path.join('%USERPROFILE%', 'path', 'to', 'file.txt')
path  = os.path.expandvars(filepath)
print(path)
```

> /home/y/path/to/file.txt

> C:\Users\y\path\to\file.txt

#### 親ディレクトリのパスを取得

```py
import os

def get_parent(path='.', lev=0):
    return str((os.path.sep).join(os.path.abspath(path).split(os.path.sep)[0:-1-lev]))

get_parent('__file__')
get_parent('__file__', 1)
```

> '/mnt/c/Users/y/Documents/GitHub'
>
> '/mnt/c/Users/y/Documents/GitHub/Python-cheatsheet'

```py
from pathlib import Path

def get_parent(path='.', lev=0):
    return Path(path).resolve().parents[lev]

get_parent('__file__')
get_parent('__file__', 1)
```

> PosixPath('/mnt/c/Users/y/Documents/GitHub/Python-cheatsheet')
>
> PosixPath('/mnt/c/Users/y/Documents/GitHub')

#### シンボリックリンクのパスを正規化

```py
import os

os.path.realpath(__file__)
```

#### Linux 上で Windows 形式のパスを操作

```py
import ntpath

print(ntpath.sep)
print(ntpath.sep is '\\')

bname = ntpath.basename('\\path\\to\\file')
print(bname)
```

> \
>
> True

> file
